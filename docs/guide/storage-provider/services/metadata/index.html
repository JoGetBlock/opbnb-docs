<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guide/storage-provider/services/metadata">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Metadata | BNB Optimistic Rollup</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/opbnb-docs/docs/guide/storage-provider/services/metadata"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Metadata | BNB Optimistic Rollup"><meta data-rh="true" name="description" content="Metadata service is to supply better query service for the Greenfield network. Users can interact with SP for some complex query services."><meta data-rh="true" property="og:description" content="Metadata service is to supply better query service for the Greenfield network. Users can interact with SP for some complex query services."><link data-rh="true" rel="icon" href="/opbnb-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/opbnb-docs/docs/guide/storage-provider/services/metadata"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/opbnb-docs/docs/guide/storage-provider/services/metadata" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/opbnb-docs/docs/guide/storage-provider/services/metadata" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/opbnb-docs/blog/rss.xml" title="BNB Optimistic Rollup RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/opbnb-docs/blog/atom.xml" title="BNB Optimistic Rollup Atom Feed"><link rel="stylesheet" href="/opbnb-docs/assets/css/styles.cbba8081.css">
<link rel="preload" href="/opbnb-docs/assets/js/runtime~main.caf89853.js" as="script">
<link rel="preload" href="/opbnb-docs/assets/js/main.29781c01.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/opbnb-docs/"><div class="navbar__logo"><img src="/opbnb-docs/img/logo.svg" alt="BNB Optimistic Rollup" class="themedImage_ToTc themedImage--light_HNdA"><img src="/opbnb-docs/img/logo.svg" alt="BNB Optimistic Rollup" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">BNB Optimistic Rollup</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_BDYx"><div class="docItemContainer_oq1c"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="row"><div class="col col--12"><h1>Metadata</h1><p>Metadata service is to supply better query service for the Greenfield network. Users can interact with SP for some complex query services.
Some interfaces can be costly to implement on the chain or can cause significant latency.
Metadata service is designed to implement the corresponding interface under the chain and provide it to the SP to achieve high performance and low latency.
The events&#x27; data are optimally stored by the block syncer and provided to the metadata.
Also, it provides additional extensions such as Pagination, Sort Key, and filtering. etc.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="role">Role<a class="hash-link" href="#role" title="Direct link to heading">​</a></h2><p>Sync all the Greenfield chain data to the distributed stores, and offers the read RPC
requests for chain data(in addition to payload). SP service will query the info, E.g.
permission, ListBucket, ListObject, etc. It will reduce the pressure on the Greenfield chain.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="scalability">Scalability<a class="hash-link" href="#scalability" title="Direct link to heading">​</a></h2><p>At present, the main role of metadata is to provide better scalability, and two main points are considered in the process of interface development:</p><ol><li>the creation of interfaces that are not currently supported on the chain</li><li>metadata can provide better performance and low latency interfaces compared to those on the chain</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-workflow">Key Workflow<a class="hash-link" href="#key-workflow" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-users-own-buckets">Get User&#x27;s Own Buckets<a class="hash-link" href="#get-users-own-buckets" title="Direct link to heading">​</a></h3><p>Metadata service Receives the GetUserBucketsRequest request from the Gateway that has been authenticated. The service
converts the data format inside BSDB to the response type of the corresponding interface, and
returns GetUserBucketsResponse, which retrieves all bucket information from the BS DB.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message">Message<a class="hash-link" href="#message" title="Direct link to heading">​</a></h2><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// GetUserBucketsRequest is request type for the GetUserBuckets RPC method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message GetUserBucketsRequest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // account_id is the account address of user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string account_id = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// GetUserBucketsResponse is response type for the GetUserBuckets RPC method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message GetUserBucketsResponse {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // buckets defines the list of bucket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  repeated Bucket buckets = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-object-by-bucket-name">List Object By Bucket Name<a class="hash-link" href="#list-object-by-bucket-name" title="Direct link to heading">​</a></h3><p>Metadata Service receives the ListObjectsByBucketNameRequest request from Gateway that has been authenticated.
The service converts the data format inside BSDB to the response type of the corresponding interface, and
returns ListObjectsByBucketNameResponse, which retrieves all object information related to the bucket from the BS DB.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-1">Message<a class="hash-link" href="#message-1" title="Direct link to heading">​</a></h2><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ListObjectsByBucketNameRequest is request type for the ListObjectsByBucketName RPC method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message ListObjectsByBucketNameRequest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // bucket_name is the name of the bucket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string bucket_name = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // account_id is the account address of user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string account_id = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ListObjectsByBucketNameResponse is response type for the ListObjectsByBucketName RPC method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message ListObjectsByBucketNameResponse {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // objects defines the list of object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  repeated Object objects = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/bnb-chain/opbnb-docs/docs/guide/storage-provider/services/metadata.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></div></article><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#role" class="table-of-contents__link toc-highlight">Role</a></li><li><a href="#scalability" class="table-of-contents__link toc-highlight">Scalability</a></li><li><a href="#key-workflow" class="table-of-contents__link toc-highlight">Key Workflow</a><ul><li><a href="#get-users-own-buckets" class="table-of-contents__link toc-highlight">Get User&#39;s Own Buckets</a></li></ul></li><li><a href="#message" class="table-of-contents__link toc-highlight">Message</a><ul><li><a href="#list-object-by-bucket-name" class="table-of-contents__link toc-highlight">List Object By Bucket Name</a></li></ul></li><li><a href="#message-1" class="table-of-contents__link toc-highlight">Message</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"></div></footer></div>
<script src="/opbnb-docs/assets/js/runtime~main.caf89853.js"></script>
<script src="/opbnb-docs/assets/js/main.29781c01.js"></script>
</body>
</html>